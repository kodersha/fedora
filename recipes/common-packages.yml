modules:
  - type: dnf
    repos:
      cleanup: true
      nonfree: negativo17
    install:
      allow-erasing: true
      install-weak-deps: false
      packages:
        - gstreamer1-plugin-vaapi
        - ffmpeg-libs        
    replace:
      - from-repo: fedora-multimedia
        packages:
          - old: libfdk-aac-free
            new: libfdk-aac
          - libheif
          - libva
          - mesa-dri-drivers
          - mesa-filesystem
          - mesa-libEGL
          - mesa-libGL
          - mesa-libgbm
          - mesa-va-drivers
          - mesa-vulkan-drivers
  
  - type: dnf
    repos:
      cleanup: true
      nonfree: rpmfusion
    replace:
      - from-repo: rpmfusion-free
        packages:
          - old: ffmpeg-free
            new: ffmpeg
          - old: mesa-va-drivers
            new: mesa-va-drivers-freeworld
          - old: libavcodec
            new: libavcodec-freeworld
      - from-repo: rpmfusion-nonfree
        packages:
        - old: libva-intel-media-driver
          new: intel-media-driver
    install:
      allow-erasing: true
      install-weak-deps: false
      packages:
        - gstreamer1-plugin-libav
        - gstreamer1-plugins-bad-free-extras
        - gstreamer1-plugins-bad-freeworld
        - gstreamer1-plugins-ugly
        - gstreamer1-vaapi
        - libheif-freeworld

  - type: dnf
    repos:
      cleanup: true
      files:
        - https://raw.githubusercontent.com/kodersha/fedora/refs/heads/main/sources/repos/microsoft-vscode.repo
      copr:
        - kodersha/fedora
        - holeprof/fedora-extended
      nonfree: rpmfusion
    install:
      allow-erasing: true
      install-weak-deps: false
      skip-unavailable: true
      packages:
        # Intel drivers and runtimes for Meteor Lake
        - intel-compute-runtime
        - intel-level-zero
        - intel-npu-driver
        - intel-lpmd
        - intel-igc

        # User interface and desktop utilities
        - gnome-tweaks
        - fastfetch

        # Shell and CLI environment
        - zsh

        # Development and DevOps tools
        - code
        - podman-compose

        # System utilities and maintenance
        - lm_sensors
        - topgrade

        # Localization and dictionaries
        - hunspell-ru

        # Multimedia
        - ffmpegthumbnailer

        # File synchronization and remote filesystem access
        - rclone
        - ifuse
        - fuse-sshfs

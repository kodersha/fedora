modules:
  - type: dnf
    repos:
      cleanup: true
      nonfree: negativo17
    install:
      allow-erasing: true
      install-weak-deps: false
      packages:
        # Multimedia and VA-API
        - gstreamer1-plugins-bad-freeworld
        - gstreamer1-plugins-ugly
        - gstreamer1-vaapi
        - ffmpeg-libs
    replace:
      - from-repo: fedora-multimedia
        packages:
          - old: libfdk-aac-free
            new: libfdk-aac
          - libheif
          - libva
          - mesa-dri-drivers
          - mesa-filesystem
          - mesa-libEGL
          - mesa-libGL
          - mesa-libgbm
          - mesa-va-drivers
          - mesa-vulkan-drivers

  - type: dnf
    repos:
      cleanup: true
      nonfree: rpmfusion
      copr:
        - holeprof/fedora-extended
    install:
      allow-erasing: true
      install-weak-deps: false
      packages:
        # Intel drivers and runtimes for Meteor Lake
        - intel-compute-runtime
        - intel-level-zero
        - intel-igc
        - intel-npu-driver
        - intel-lpmd

        # Multimedia
        - ffmpeg
        - ffmpegthumbnailer
        - libavcodec-freeworld
        - libheif-freeworld

        # Graphics and hardware acceleration
        - mesa-va-drivers-freeworld
        - ocl-icd
    replace:
      - from-repo: rpmfusion-nonfree
        packages:
          - old: libva-intel-media-driver
            new: intel-media-driver

  - type: dnf
    repos:
      cleanup: true
      files:
        - https://raw.githubusercontent.com/kodersha/fedora/refs/heads/main/sources/repos/microsoft-vscode.repo
      copr:
        - kodersha/fedora
      nonfree: rpmfusion
    install:
      allow-erasing: true
      install-weak-deps: false
      skip-unavailable: true
      packages:
        # User interface and desktop utilities
        - gnome-tweaks
        - fastfetch

        # Shell and CLI environment
        - zsh

        # Development and DevOps tools
        - code
        - podman-compose

        # System utilities and maintenance
        - lm_sensors
        - topgrade

        # Localization and dictionaries
        - hunspell-ru

        # File synchronization and remote filesystem access
        - rclone
        - ifuse
        - fuse-sshfs
